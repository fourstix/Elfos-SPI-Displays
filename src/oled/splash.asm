;-------------------------------------------------------------------------------
; Display the Adafruit graphics splash screen on the OLED display using the
; SH1106 controller chip connected to port 0 of the 1802/Mini SPI interface.
;
; Copyright 2023 by Gaston Williams
;
; Based on code from the Elf-Elfos-OLED library
; Written by Tony Hefner
; Copyright 2022 by Tony Hefner
;
; SPI Expansion Board for the 1802/Mini Computer hardware
; Copyright 2022 by Tony Hefner 
;-------------------------------------------------------------------------------
#include include/bios.inc
#include include/kernel.inc
#include include/ops.inc
#include include/sh1106_oled.inc

            org   2000h
start:      br    main


            ; Build information
            ; Build date
date:       db      80h+2          ; Month, 80h offset means extended info
            db      19             ; Day
            dw      2023           ; year
           
            ; Current build number
build:      dw      2              ; build
            db    'Copyright 2023 by Gaston Williams',0


            ; Main code starts here, check provided argument

main:       lda   ra                    ; move past any spaces
            smi   ' '
            lbz   main
            dec   ra                    ; move back to non-space character
            ldn   ra                    ; get byte
            lbz   clr                   ; jump if no argument given
            call  o_inmsg               ; otherwise display usage message
            db    'Usage: splash',10,13,0
            ldi   $0a
            rtn                         ; and return to os

clr:        call  init_oled
            mov   rf, buffer            ; point rf to display buffer
            call  show_oled

done:       ldi   0
            rtn
            
buffer:     db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $80
            db  $80, $80, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $80, $80, $C0, $C0, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $80, $C0, $E0, $F0, $F8, $FC, $F8, $E0, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $80, $80, $80
            db  $80, $80, $00, $80, $80, $00, $00, $00, $00, $80, $80, $80, $80, $80, $00, $FF
            db  $FF, $FF, $00, $00, $00, $00, $80, $80, $80, $80, $00, $00, $80, $80, $00, $00
            db  $80, $FF, $FF, $80, $80, $00, $80, $80, $00, $80, $80, $80, $80, $00, $80, $80
            db  $00, $00, $00, $00, $00, $80, $80, $00, $00, $8C, $8E, $84, $00, $00, $80, $F8
            db  $F8, $F8, $80, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $F0, $F0, $F0, $F0, $F0, $F0, $F0, $F0, $F0, $F0, $F0, $F0, $E0, $E0, $C0, $80
            db  $00, $E0, $FC, $FE, $FF, $FF, $FF, $7F, $FF, $FF, $FF, $FF, $FF, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $FE, $FF, $C7, $01, $01
            db  $01, $01, $83, $FF, $FF, $00, $00, $7C, $FE, $C7, $01, $01, $01, $01, $83, $FF
            db  $FF, $FF, $00, $38, $FE, $C7, $83, $01, $01, $01, $83, $C7, $FF, $FF, $00, $00
            db  $01, $FF, $FF, $01, $01, $00, $FF, $FF, $07, $01, $01, $01, $00, $00, $7F, $FF
            db  $80, $00, $00, $00, $FF, $FF, $7F, $00, $00, $FF, $FF, $FF, $00, $00, $01, $FF
            db  $FF, $FF, $01, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $03, $0F, $3F, $7F, $7F, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $E7, $C7, $C7, $8F
            db  $8F, $9F, $BF, $FF, $FF, $C3, $C0, $F0, $FF, $FF, $FF, $FF, $FF, $FC, $FC, $FC
            db  $FC, $FC, $FC, $FC, $FC, $F8, $F8, $F0, $F0, $E0, $C0, $00, $01, $03, $03, $03
            db  $03, $03, $01, $03, $03, $00, $00, $00, $00, $01, $03, $03, $03, $03, $01, $01
            db  $03, $01, $00, $00, $00, $01, $03, $03, $03, $03, $01, $01, $03, $03, $00, $00
            db  $00, $03, $03, $00, $00, $00, $03, $03, $00, $00, $00, $00, $00, $00, $00, $01
            db  $03, $03, $03, $03, $03, $01, $00, $00, $00, $01, $03, $01, $00, $00, $00, $03
            db  $03, $01, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $80, $C0, $E0, $F0, $F9, $FF, $FF, $FF, $FF, $FF, $3F, $1F, $0F
            db  $87, $C7, $F7, $FF, $FF, $1F, $1F, $3D, $FC, $F8, $F8, $F8, $F8, $7C, $7D, $FF
            db  $FF, $FF, $FF, $FF, $FF, $FF, $FF, $7F, $3F, $0F, $07, $00, $30, $30, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $FE, $FE, $FC, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $E0, $C0, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $30, $30, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $C0, $FE, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $7F, $7F, $3F, $1F
            db  $0F, $07, $1F, $7F, $FF, $FF, $F8, $F8, $FF, $FF, $FF, $FF, $FF, $FE, $F8, $E0
            db  $00, $00, $00, $01, $00, $00, $00, $00, $00, $00, $00, $00, $FE, $FE, $00, $00
            db  $00, $FC, $FE, $FC, $0C, $06, $06, $0E, $FC, $F8, $00, $00, $F0, $F8, $1C, $0E
            db  $06, $06, $06, $0C, $FF, $FF, $FF, $00, $00, $FE, $FE, $00, $00, $00, $00, $FC
            db  $FE, $FC, $00, $18, $3C, $7E, $66, $E6, $CE, $84, $00, $00, $06, $FF, $FF, $06
            db  $06, $FC, $FE, $FC, $0C, $06, $06, $06, $00, $00, $FE, $FE, $00, $00, $C0, $F8
            db  $FC, $4E, $46, $46, $46, $4E, $7C, $78, $40, $18, $3C, $76, $E6, $CE, $CC, $80
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $01, $07, $0F, $1F, $1F, $3F, $3F, $3F, $3F, $1F, $0F, $03
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $0F, $0F, $00, $00
            db  $00, $0F, $0F, $0F, $00, $00, $00, $00, $0F, $0F, $00, $00, $03, $07, $0E, $0C
            db  $18, $18, $0C, $06, $0F, $0F, $0F, $00, $00, $01, $0F, $0E, $0C, $18, $0C, $0F
            db  $07, $01, $00, $04, $0E, $0C, $18, $0C, $0F, $07, $00, $00, $00, $0F, $0F, $00
            db  $00, $0F, $0F, $0F, $00, $00, $00, $00, $00, $00, $0F, $0F, $00, $00, $00, $07
            db  $07, $0C, $0C, $18, $1C, $0C, $06, $06, $00, $04, $0E, $0C, $18, $0C, $0F, $07
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
            db  $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00

            end   start
